(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{619:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vue3-和-vue-中的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue3-和-vue-中的差异"}},[s._v("#")]),s._v(" vue3 和 vue 中的差异")]),s._v(" "),a("p",[s._v("基于函数式编程")]),s._v(" "),a("h2",{attrs:{id:"一、入口文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、入口文件"}},[s._v("#")]),s._v(" 一、入口文件")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("createApp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mixins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("directive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"二、fragement-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、fragement-template"}},[s._v("#")]),s._v(" 二、Fragement template")]),s._v(" "),a("p",[s._v("可以使用多个节点")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("demo1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("demo2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("demo1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("demo2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"三、style"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、style"}},[s._v("#")]),s._v(" 三、style")]),s._v(" "),a("div",{staticClass:"language-scss line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scss"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ::v-deep()")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v('<style lang="scss" scoped>\n  .openApi-radio')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("10px 0 20px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("v-deep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".el-radio-button__inner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("border")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1px solid "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rgb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("220"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 223"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 230"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// /deep/ .el-radio-button__inner{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   border: 1px solid rgb(220, 223, 230);")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n</style>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"四、suspense"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、suspense"}},[s._v("#")]),s._v(" 四、Suspense")]),s._v(" "),a("p",[s._v("一开始是 react 中 才有的，vue2 中一般使用 "),a("code",[s._v("v-if")]),s._v("去模拟")]),s._v(" "),a("h3",{attrs:{id:"🐩-异步组件作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐩-异步组件作用"}},[s._v("#")]),s._v(" 🐩 异步组件作用")]),s._v(" "),a("ul",[a("li",[s._v("在页面加载之前显示加载动画")]),s._v(" "),a("li",[s._v("显示占位符内容")]),s._v(" "),a("li",[s._v("处理延迟加载的图像")])]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Suspense"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template #"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("HeaderNav "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template #fallback"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Loading "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Suspense"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 结合difineSyncComponents使用")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),s._v(" "),a("h2",{attrs:{id:"五、可以使用-jsx-tsx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、可以使用-jsx-tsx"}},[s._v("#")]),s._v(" 五、可以使用 jsx + tsx")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" React "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createElement"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" h "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 为了让 tsx 转换之后的代码可以正确引用到 vue")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"六、-重构-virtual-dom-修改了diff算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、-重构-virtual-dom-修改了diff算法"}},[s._v("#")]),s._v(" 六、 重构 Virtual DOM，修改了diff算法")]),s._v(" "),a("ol",[a("li",[s._v("模板编译时的优：将一些静态节点编译成常量")]),s._v(" "),a("li",[s._v("slot优化：将slot编译为lazy函数，将slot的渲染的决定权交给子组件")]),s._v(" "),a("li",[s._v("模板中内联事件的提取并重用（原本每次渲染都重新生成内联函数）")]),s._v(" "),a("li",[s._v("代码结构调整：更便于Tree shaking（实际情况中，虽然依赖了某个模块，但其实只使用其中的某些功能。通过 tree-shaking，将没有使用的模块摇掉，这样来达到删除无用代码的目的。），使得体积更小")]),s._v(" "),a("li",[s._v("使用Typescript替换Flow")]),s._v(" "),a("li",[s._v("修改了diff算法： vue2需要diff所有的虚拟dom节点，而vue3参考了SVELTE框架的思想，先分层次-然后找不变化的层-针对变化的层进行diff，更新速度不会再受template大小的影响，而是仅由可变的内容决定。经过尤雨溪自己的测试，大概有6倍的速度提升。")])]),s._v(" "),a("h2",{attrs:{id:"七、-为什么要重写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、-为什么要重写"}},[s._v("#")]),s._v(" 七、 为什么要重写？")]),s._v(" "),a("ol",[a("li",[s._v("利用新的语言特性 proxy 拦截对象的某个操作，不用去遍历整个对象\n"),a("ol",[a("li",[s._v("不能识别对象的深度嵌套")]),s._v(" "),a("li",[s._v("数组会导致多次的get、set")])])]),s._v(" "),a("li",[s._v("解决架构设计问题\n"),a("ol",[a("li",[s._v("vue2 代码耦合性强，有很多代码api都在实例上，不能tree shaking")]),s._v(" "),a("li",[s._v("vue3 把各个功能的模块独立开--\x3e方便分包--\x3e composition API")]),s._v(" "),a("li",[s._v("vue2 编译时的优化，静态节点，模板编译（正则匹配[有回溯问题]）\n"),a("ol",[a("li",[s._v("vue3静态节点提升优化")]),s._v(" "),a("li",[s._v("静态节点字符串化")]),s._v(" "),a("li",[s._v("动态 blockTree/动态标记")]),s._v(" "),a("li",[s._v("编译过程，状态机编译模式")])])])])])]),s._v(" "),a("p",[s._v("处理成响应式数据\n渲染和数据关联起来（数据变更）")]),s._v(" "),a("h2",{attrs:{id:"八、为什么更快更小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、为什么更快更小"}},[s._v("#")]),s._v(" 八、为什么更快更小")]),s._v(" "),a("h3",{attrs:{id:"_8-1-克服虚拟-dom-的瓶颈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-克服虚拟-dom-的瓶颈"}},[s._v("#")]),s._v(" 8.1 克服虚拟 DOM 的瓶颈")]),s._v(" "),a("h4",{attrs:{id:"vue2-独特的渲染策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-独特的渲染策略"}},[s._v("#")]),s._v(" vue2 独特的渲染策略")]),s._v(" "),a("p",[s._v("它提供了类似于 HTML 的模板语法，但是将模板编译为可返回虚拟 DOM 树的渲染函数")]),s._v(" "),a("h4",{attrs:{id:"特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),a("ol",[a("li",[s._v("通过递归遍历两个虚拟 DOM 树，并比较每个节点上的每个属性来确定真实 DOM 的哪些部分需要更新")]),s._v(" "),a("li",[s._v("但是更新仍然涉及许多不必要的 CPU 工作。当您查看的模板中大部分是静态内容并且只有少量动态绑定时，效率低下尤其明显-整个虚拟 DOM 树仍需要递归遍历以找出更改之处。")]),s._v(" "),a("li",[s._v("模板编译步骤使我们有机会 对模板进行静态分析 并提取有关动态部分的信息，通过跳过静态子树在某种程度上做到了这一点")]),s._v(" "),a("li",[s._v("Vue 2 通过跳过静态子树在某种程度上做到了这一点，不过由于编译器体系结构过于简单，难以进行更高级的优化")]),s._v(" "),a("li",[s._v("在 Vue 3中，使用适当的 AST 转换 pipeline 重写了编译器，这使我们能够以转换插件的形式编写编译时的优化")])]),s._v(" "),a("h3",{attrs:{id:"消除不必要的虚拟dom树遍历和属性比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消除不必要的虚拟dom树遍历和属性比较"}},[s._v("#")]),s._v(" 消除不必要的虚拟DOM树遍历和属性比较")]),s._v(" "),a("p",[s._v("编译器和运行时必须同时工作：编译器分析模板和生成带有优化提示的代码，同时，运行时拾取这些提示，并采取尽可能快的更新策略")]),s._v(" "),a("p",[s._v("vue2流程\n模板 template==> 本地编译成render() ==> 上线到服务端 ==> 浏览器加载下来")]),s._v(" "),a("ol",[a("li",[s._v("new Vue()实例，过程当中👇")]),s._v(" "),a("li",[s._v("Observer 把数据处理成响应式数据")]),s._v(" "),a("li",[s._v("之后，绑定对应的get/set\n"),a("ol",[a("li",[s._v("get 收集")]),s._v(" "),a("li",[s._v("set 分发")]),s._v(" "),a("li",[s._v("这个时候并没有马上去触发get/set")])])]),s._v(" "),a("li",[s._v("浏览器执行render，过程当中👇\n"),a("ol",[a("li",[s._v("创建VNode")]),s._v(" "),a("li",[s._v("会使用with()，上面有个this 指向 vue实例，在里面使用数据的时候会触发 get")])])]),s._v(" "),a("li",[s._v("同时 render的时候，会去new watcher（一个组件对应一个watcher），一个组件编译成一个render\n"),a("ol",[a("li",[s._v("加到dep.target上面")])])])]),s._v(" "),a("p",[s._v("主要分三步")]),s._v(" "),a("ol",[a("li",[s._v("初始化\n"),a("ol",[a("li",[s._v("把数据处理成响应式数据，也就是加上 setter/getter函数")]),s._v(" "),a("li",[s._v("Dep就是一个观察者类")]),s._v(" "),a("li",[s._v("每一个data的属性都会有一个dep对象")]),s._v(" "),a("li",[s._v("当getter调用的时候，去dep里注册")]),s._v(" "),a("li",[s._v("setter的时候，就是去通知执行刚刚注册的函数")])])]),s._v(" "),a("li",[s._v("挂载\n"),a("ol",[a("li",[s._v("会创建一个Watcher类的对象，Watcher实际上是连接Vue组件与Dep的桥梁")]),s._v(" "),a("li",[s._v("每一个Watcher对应一个组件")])])]),s._v(" "),a("li",[s._v("更新\n"),a("ol",[a("li",[s._v("发生改变的时候，调用Dep的notify函数")]),s._v(" "),a("li",[s._v("通知所有的Watcher调用update函数更新")])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);