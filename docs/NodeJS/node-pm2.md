# PM2

pm2是一个带有负载均衡功能的node应用的进程管理器

特性：
- 启动多 子进程，充分利用CPU
- 子进程之间负载均衡
- 0秒重启
- 界面友好
- 提供进程交互接口

## 依据什么重启服务

pm2采用**心跳检测** 查看子进程是否处于活跃状态

跳检测原理：
- 每秒向子进程发送心跳包，如果子进程不回复，就调用`kill`杀死这个进程，再重新`cluster.fork()`一个新进程
- 子进程可以监听错误事件，然后发送给主进程，请求杀死自己，主进程再重新`cluster.fork()`一个新子进程

## 常用命令
pm2 ~~
- start 启动
- list 查看进程列表
- delete 从进程中删除进程
- describe 查看进程具体情况
- monit 查看进程消耗情况（CPU和memory）
- restart 重启
- logs 日志
- stop 停止应用
- kill 杀死进程

## 保持程序不中断运行
`pm2 restart all`