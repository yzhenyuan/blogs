# 内存中的 栈、堆

栈和堆是管理内存的两种主要方式

## 栈（Stack）

栈的管理方式一般是函数调用栈要用到

在调用函数的时候要一层一层的去调用其他函数 ，在调用其他函数的时候，要保存上一个函数的变量（比如一些局部变量在 CPU 运行的时候放在寄存器里的）

```js
function test() {
  let t1 = 1;
  test1();
  test2();
}
function test1() {
  let t2 = 2;
}
function test2() {
  let t3 = 3;
}
```

1. 执行函数 test ,进入 test 的作用域，先把变量 t1 存储到寄存器
2. 执行 test1 函数，进入到 test1 的作用域中，test 的局部变量就放到栈里 去压栈，
3. 当退出主调函数 test 中的时候，变量从栈里弹出来
4. 这种使用性能比较高，不用一直去内存中去查找

**栈是由编译器去生成的，跑起来的时候由程序去管理**

## 堆（Heap）

复杂（引用）类型放到堆中

**堆是由操作系统去管理的，一般是应用程序在运行的时候请求操作系统给自己分配内存**，一般是一个申请/给予的过程，相当于是借（因为本身操作系统的内存是固定的），如果不归还就是常说的**内存泄漏**🔨
